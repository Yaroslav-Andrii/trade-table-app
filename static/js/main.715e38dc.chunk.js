(this["webpackJsonptrade-table-app"]=this["webpackJsonptrade-table-app"]||[]).push([[0],{14:function(e,t,n){e.exports=n(23)},19:function(e,t,n){},22:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAgCAMAAACVQ462AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAActQTFRFAAAAPsgY////A4IBoKCgsLCwzgMDA4MBoaGhsLCwzgQEW1tbiYmJA4IBoKCgsLCwzgQEA4MBoaGhsLCwzgQEsrKy0AoKB4cDpKSkCIgDpaWls7Oz0QoKC4wEqKiotbW10g8PDI0Fqamptra20xERf39/o6Ojf39/o6OjgICAo6OjgICAgYGBo6OjpKSkDY8Fq6urtra20xISEpQHr6+vubm51RgYCIgDpaWls7Oz0QoKEpUIsLCwurq61hkZD5AGq6urt7e31BQUCIgDpaWls7Oz0QsLmZmZmpqatbW1tra2mpqatra2GZ0Kt7e3vr6+2SMjGp4LuLi4vr6+2SQkHKALHKEMHqMMIKUNJ64QKK4QKK8QLLMSLLQSLbUSLrUTL7YTL7wRMrsVM7sVNLwVNL0VNb4WNr8WO8AfPsgYoqKip6enrq6ur6+vsLCwsbGxtra2ubm5u7u7vLy8vb29v7+/wMDAwcHBwsLCxMTExcXFxsbGx8fHyMjIycnJysrKy8vLzMzMzc3Nzs7Oz8/P0NDQ0dHR0tLS09PT1tbW2iYm2icn2ykp3Cws3zY24Dc34Tw84j094j4+4j8/40BA5EVF5UdH5klJ5kpKg3z7XgAAAFV0Uk5TAAAAAQEBAQMDAwMGBg0NDQ0VFRUVISEiIiUlJSVvb29vfX1+foiIiYmQkJGRkZGrq6urtLS0tLW1tbW3t7i4vb2+vsTExsbt7e3t7u709PT0+Pj4+NNKw2oAAAGhSURBVEjH7ZXlT8NQFMVfcRnu7jrc3WVsuDsU69oBxRlbmVHgocMG/XMZJGtum9CQ8G3hfGhyk3N+ee/clxT5/FHISwAIRXXXhyEgpyA4kVwwR5MSQGD79FS5L/A+CcITGEPVGp06VAGQNbu6MpMGEi5BcIGxaMdo3M6TAGgCAJLGlre2loYSPP66x3dBeHe2iQCNkeNO+0H6W3oR0Dy/SVEbc9Uef/zo88fHy2TqTwA9SdMkSepBiesUtQaOnHn/+vaQK7tCgQggCIIm3R8AWKSoRQAIqLq96woBJZbopCUSshLRAkUtwI1FNvXFKq6RlAF+JaWH9A/wCkB0T0M49HI8zykCWEYCCOo42K/wA95znj8Ho6pUO1iqUgBkH9lsh+kgYed5OxiLTRif5UsALAQkj9uur63DiR5/rdnB8w6uVQRo8c0NHhDTe+yXdg0ioMV0hfGlqcbjjxuxXFxYJlJ+AhgYlmUYxgBKvHQDwJEzTqw2Y47sCoUKHSALxhYA8K88Pu4MBiWWDSqXiMwYm+HGIhp7YxTXyDBe9mv7iz4BZRJ3oz5WbLUAAAAASUVORK5CYII="},23:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(11),o=n.n(c),s=(n(19),n(4)),i=n(5),l=function(e){var t=e.data,n=Object(a.useRef)(Object(i.a)({},t)),c=Object(a.useState)({bid:"",ask:"",symbol:"i ask-static"}),o=Object(s.a)(c,2),l=o[0],p=o[1];return Object(a.useEffect)((function(){p((function(e){var a=Object(i.a)({},e);return a.ask=u(n.current.ask,t.ask),a.bid=u(n.current.bid,t.bid),a.symbol="up"===a.ask?"i ask-up":"down"===a.ask?"i ask-down":"i ask-static",n.current=t,a}))}),[t]),Object(a.useEffect)((function(){return function(){n=null}}),[]),r.a.createElement("tr",{"data-symbol":t.name},r.a.createElement("td",null,r.a.createElement("span",{className:"content"},r.a.createElement("span",{className:l.symbol}),t.name)),r.a.createElement("td",null,r.a.createElement("span",{className:"content"},r.a.createElement("span",{className:l.bid},t.bid))),r.a.createElement("td",null,r.a.createElement("span",{className:"content"},r.a.createElement("span",{className:l.ask},t.ask))))};function u(e,t){return t>e?"up":t<e?"down":""}var p,m,f=n(8),d=r.a.createContext(),b=function(e){var t=e.children,n=e.contextElement,c=e.inputOnFocus,o=e.ordersListDispatcher,s=Object(a.useContext)(d).removePair;function i(e,t){switch(t.type){case"add":c(!0);break;case"rm":s(n,o)}}return r.a.createElement("div",null,r.a.createElement(f.b,{id:"same_unique_identifier"},t),r.a.createElement(f.a,{id:"same_unique_identifier"},r.a.createElement(f.c,{data:{type:"add",contextElement:n},onClick:i},"Add new order"),r.a.createElement(f.c,{data:{type:"rm",contextElement:n},onClick:i},"Hide order")))},E=["AUD","BGN","BRL","CAD","CHF","CNY","CZK","DKK","EUR","GBP","HKD","HUF","ILS","INR","JPY","MXN","NOK","NZD","PLN","RON","RUB","SEK","SGD","TRY","UAH","USD","ZAR","BTC","LTH","ETC"],A=["EURUSD","GBPUSD","USDCHF","USDJPY","USDCNH","USDRUB","AUDUSD","USDCAD","USDSEK","USDTRY","USDZAR","USDCZK","USDHUF","USDPLN","USDRUR","AUDCAD"],g=(p=E.length,m=2,S(p)/(S(m)*S(p-m))*2);function S(e){return e?e*S(e-1):1}n(22);var h=function(){var e=Object(a.useContext)(d),t=e.setConnection,n=e.addNewPair,c=Object(a.useState)(!1),o=Object(s.a)(c,2),i=o[0],u=o[1],p=function(e){var t=Object(a.useState)([]),n=Object(s.a)(t,2),r=n[0],c=n[1];return Object(a.useEffect)((function(){e(c)}),[]),{orders:r,setOrders:c}}(t),m=p.orders,f=p.setOrders,E=function(e){var t=Object(a.useRef)(),n=Object(a.useState)(""),c=Object(s.a)(n,2),o=c[0],i=c[1];Object(a.useEffect)((function(){t.current&&t.current.focus()})),Object(a.useEffect)((function(){return function(){t=null}}),[]);return{inputValue:o,inputForm:r.a.createElement("input",{ref:t,onBlur:e,style:{float:"right",width:"96%"},type:"text",value:o,onChange:function(e){i(e.target.value)}}),setInputValue:i}}((function(e){return u(!1)})),A=E.inputValue,S=E.inputForm,h=E.setInputValue,O=Object(a.useState)(""),y=Object(s.a)(O,2),v=y[0],k=y[1];return r.a.createElement("div",{className:"tables-box"},r.a.createElement(b,{contextElement:v,inputOnFocus:u,ordersListDispatcher:f},r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("span",{className:"content"},"Symbol")),r.a.createElement("th",null,r.a.createElement("span",{className:"content"},"Bid")),r.a.createElement("th",null,r.a.createElement("span",{className:"content"},"Ask")))),r.a.createElement("tbody",{onContextMenu:function(e){for(var t=e.target;"TR"!==t.tagName;)t=t.parentElement;k(t.dataset.symbol?t.dataset.symbol:"")}},m.length?m.map((function(e){return r.a.createElement(l,{key:e.name,data:e})})):null),r.a.createElement("tfoot",null,i?r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"3"},r.a.createElement("span",{className:"i add"}),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),n(A),h(""),u(!1)}},S))):r.a.createElement("tr",{onClick:function(e){return u(!0)}},r.a.createElement("td",{colSpan:"2"},r.a.createElement("span",{className:"content"},r.a.createElement("span",{className:"i add"}),"click to add...")),r.a.createElement("td",null,r.a.createElement("span",{className:"content"},"".concat(m.length,"/").concat(g))))))))};var O=function(){var e=Object(a.useContext)(d),t=e.data,n=e.setApiKey,c=Object(a.useState)(""),o=Object(s.a)(c,2),i=o[0],l=o[1],u=r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),n(i)}},r.a.createElement("input",{type:"text",value:i,onChange:function(e){return l(e.target.value)}}),r.a.createElement("button",{type:"submit"},"Save"));return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"App"),t.apiKey?r.a.createElement(h,null):u)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var y,v=n(6),k=n(10),C=(y={DEFAULT:function(e){return e}},Object(v.a)(y,"SET_API_KEY",(function(e,t){return Object(i.a)(Object(i.a)({},e),{},{apiKey:t.payload})})),Object(v.a)(y,"ADD_PAIR",(function(e,t){return Object(i.a)(Object(i.a)({},e),{},{pairs:[].concat(Object(k.a)(e.pairs),[t.payload])})})),Object(v.a)(y,"REMOVE_PAIR",(function(e,t){return Object(i.a)(Object(i.a)({},e),{},{pairs:e.pairs.filter((function(e){return e!==t.payload}))})})),y),w=function(e,t){return(C[t.type]||C.DEFAULT)(e,t)},D=n(12),j=n(13),U=function(){function e(t,n,a,r){Object(D.a)(this,e),this.unpackData=function(e){var t=e.split("|"),n={};for(var a in this.order)n[this.order[a]]=t[a];return n.name=this.mapping[n.name],n.time=parseFloat(n.time)/this.time_mult,n.time+=this.start_time,n},this.start_time=0,this.wsUri=t,this.time_mult=1,this.mapping={},this.order=[],this.wscbs=n,this.protocb=a,this.opts=r||{},this.wsClose=null}return Object(j.a)(e,[{key:"start",value:function(e){var t=this,n=new WebSocket(this.wsUri);this.wsClose=function(){n.close()},n.onmessage=function(e){return t.process(e.data)},n.onclose=this.wscbs.onclose,n.onopen=function(a){t.wscbs.onopen(a),n.send(t.pack({pairs:e,options:t.opts}))},n.onerror=this.wscbs.onerror}},{key:"process",value:function(e){var t=e.substring(0,1),n=e.substring(1),a=this.protocb["on"+t],r=null;switch(t){case"0":r=this.unpackInit(n);break;case"7":case"8":case"9":r=this.unpackErrPair(n);break;case"1":r=this.unpackData(n);break;case"2":r=""}if(null!=r)if(a)a(r,this.opts);else{if(null===a)return;var c=this.protocb.__default;c?c(r):this.protocb.fatal(e)}else this.protocb.fatal(e)}},{key:"unpackErrPair",value:function(e){return JSON.parse(e)}},{key:"unpackInit",value:function(e){var t=JSON.parse(e);return this.start_time=t.start_time,this.mapping=t.mapping,this.order=t.order,this.time_mult=t.time_mult,t}},{key:"pack",value:function(e){return JSON.stringify(e)}},{key:"toString",value:function(e){return JSON.stringify(e)}}]),e}(),N={},I={};function K(e){console.log(e)}N.__default=null,N.on0=function(){K("Connected.")},N.on1=function(e,t){(0,t.dispatcher)((function(t){var n=Object(k.a)(t),a=t.findIndex((function(t){return t.name===e.name}));return~a?(n[a]=e,n):(n.push(e),n)}))},N.on2=function(){K("Ping received.")},N.on7=function(e){K("Error:"+e)},N.on8=function(e){K("Error:"+e)},N.on9=function(e){K("Error:"+e)},N.fatal=function(e){K("Error:"+e)},I.onopen=function(){K("Connection opened.")},I.onclose=function(){K("Connection closed.")},I.onerror=function(){K("Fatal error.")};var R=function(e){var t=e.children,n=Object(a.useReducer)(w,function(){var e={};return localStorage.getItem("pairs")?e.pairs=JSON.parse(localStorage.getItem("pairs")):(e.pairs=A,localStorage.setItem("pairs",JSON.stringify(A))),localStorage.getItem("apiKey")?e.apiKey=localStorage.getItem("apiKey"):e.apiKey="",e}()),c=Object(s.a)(n,2),o=c[0],i=c[1],l=Object(a.useRef)();return r.a.createElement(d.Provider,{value:{setApiKey:function(e){localStorage.setItem("apiKey",e),i({type:"SET_API_KEY",payload:e})},setConnection:function(e){l.current=new U("wss://api.xchangeapi.com/websocket/live?api-key=".concat(o.apiKey),I,N,{dispatcher:e}),l.current.start(o.pairs)},addNewPair:function(e){if(6===(e=e.toUpperCase().trim()).length)if(E.includes(e.slice(0,3))&&E.includes(e.slice(3)))if(e.slice(0,3)!==e.slice(3))if(o.pairs.includes(e))console.log("The pair already exist");else{var t=JSON.parse(localStorage.getItem("pairs"));t.push(e),localStorage.setItem("pairs",JSON.stringify(t)),l.current.wsClose(),l.current.start(t),i({type:"ADD_PAIR",payload:e})}else console.log("String is not correct");else console.log("String is not correct");else console.log("String is not correct")},removePair:function(e,t){var n=JSON.parse(localStorage.getItem("pairs")).filter((function(t){return t!==e}));localStorage.setItem("pairs",JSON.stringify(n)),l.current.wsClose(),t((function(t){return t.filter((function(t){return t.name!==e}))})),l.current.start(n),i({type:"REMOVE_PAIR",payload:e})},data:o}},t)};o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(R,null,r.a.createElement(O,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[14,1,2]]]);
//# sourceMappingURL=main.715e38dc.chunk.js.map